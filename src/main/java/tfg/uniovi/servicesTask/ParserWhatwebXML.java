package tfg.uniovi.servicesTask;

import org.activiti.engine.delegate.DelegateExecution;
import org.activiti.engine.delegate.JavaDelegate;
import org.springframework.beans.factory.annotation.Autowired;

import tfg.uniovi.model.Server;
import tfg.uniovi.model.dto.ServerDTO;
import tfg.uniovi.repository.ServerRepository;
import tfg.uniovi.util.XMLParser;

public class ParserWhatwebXML implements JavaDelegate {

	@Autowired
	private ServerRepository serverRepository;
	
	@Override
	public void execute(DelegateExecution execution) throws Exception {
		ServerDTO serverDTO = XMLParser.parse("prueba.xml","plugin","name");
		execution.setVariable("name", serverDTO.getName());
		execution.setVariable("version", serverDTO.getVersion());
		execution.setVariable("cms", serverDTO.getCms());
		execution.setVariable("cmsVersion", serverDTO.getCmsVersion());
		//serverRepository.save(new Server());
	}

}
